{% import mobility %}
<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>mobility</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="node_modules/bootstrap-select-v4/dist/css/bootstrap-select.min.css">
  <link rel="stylesheet" href="style.css">
</head>

<body>
  {% set base = '.' %}
  {% include template-navbar.html %}
  <!-- TODO: Filter bars -->
  <div class="container-fluid py-4">
    <div class="row">
      <div class="col-md-6">
        <div class="card">
          <h5 class="card-header">Mobility Trend</h5>
          <div class="card-body">
            <svg id="trendline"></svg>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="ui/jquery/dist/jquery.min.js"></script>
  <script src="ui/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
  <script src="node_modules/bootstrap-select-v4/dist/js/bootstrap-select.min.js"></script>
  <script src="ui/d3v5/dist/d3.min.js"></script>
  <script src="js/trendline.js"></script>
  <!-- Commonly used libraries:

  <script src="ui/lodash/lodash.min.js"></script>
  <script src="ui/morphdom/dist/morphdom-umd.min.js"></script>
  <script src="ui/g1/dist/g1.min.js"></script>
  <script src="ui/moment/min/moment-with-locales.min.js"></script>
  <script src="ui/daterangepicker/daterangepicker.js"></script>
  <script src="ui/leaflet/dist/leaflet.js"></script>
  <script src="ui/topojson/dist/topojson.min.js"></script>
  -->
  <script>
    draw_charts()
    $('.selectpicker').on('changed.bs.select', function(){
      draw_charts()
    })

    function draw_charts() {
      $.getJSON('google?country='+$('.country-picker').selectpicker('val'), function(data){
        draw_trendline('#trendline', JSON.parse(data.data), {
          x: 'date',
          y: $('.category-picker').selectpicker('val')
        })
      })
    }
  </script>
</body>

</html>
